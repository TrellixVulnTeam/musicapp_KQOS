{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    // @Output() getLoggedInUser: EventEmitter<any> = new EventEmitter();\n    constructor() {\n      this.getLoggedTitle = new EventEmitter();\n      this.isLoggedIn = false;\n    }\n\n    login() {\n      localStorage.removeItem('userObj');\n      DZ.login(response => {\n        if (response.authResponse) {\n          console.log('Welcome!  Fetching your information.... ');\n          DZ.api('/user/me', response => {\n            DZ.player.playAlbum(285723602, true);\n            console.log(response);\n            localStorage.setItem('userObj', JSON.stringify(response));\n            console.log(JSON.parse(localStorage.userObj));\n            this.user = JSON.parse(localStorage.userObj);\n            this.isLoggedIn = true;\n            this.getLoggedTitle.emit('Logout');\n            return {\n              status: this.isLoggedIn,\n              user: this.user\n            };\n          });\n        } else {\n          console.log('User cancelled login or did not fully authorize.');\n          alert('Please log in.');\n        }\n      }\n      /*,{perms: 'basic_access,email'}*/\n      );\n    }\n\n    checkLogin() {\n      DZ.getLoginStatus(response => {\n        console.log(\"Hey there , just checking if you are logged in ...\");\n\n        if (response.authResponse.accessToken) {\n          this.isLoggedIn = true;\n          console.log(\"App innit : \" + this.isLoggedIn);\n          alert(\"Welcome back :::: \" + JSON.stringify(response.authResponse));\n          localStorage.setItem('properties', JSON.stringify(response.authResponse)); //  return {status : this.isLoggedIn , user : this.user};\n        } else {\n          // no user session available, someone you dont know\n          alert(\"Please log in!\");\n          this.isLoggedIn = false; //   return this.isLoggedIn;\n          //force login\n          //AuthService.login();\n        }\n      });\n    }\n\n    logout() {\n      DZ.logout();\n      localStorage.removeItem(\"userObj\");\n      localStorage.removeItem(\"properties\");\n      this.getLoggedTitle.emit('Login');\n      this.isLoggedIn = false;\n      console.log(\"logged out\" + JSON.stringify(localStorage) + this.isLoggedIn);\n      return this.isLoggedIn; //document.location.href=\"/\";\n    }\n\n  }\n\n  AuthService.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)();\n  };\n\n  AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n  return AuthService;\n})();","map":null,"metadata":{},"sourceType":"module"}