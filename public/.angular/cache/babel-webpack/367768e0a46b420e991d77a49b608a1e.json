{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor() {\n      this.getLoggedStatus = new EventEmitter();\n      this.isLoggedIn = false;\n      this.resultobj = new Object();\n    }\n\n    login() {\n      localStorage.removeItem('userObj');\n      DZ.login(response => {\n        if (response.authResponse) {\n          console.log('Welcome!  Fetching your information.... ');\n          DZ.api('/user/me', response => {\n            DZ.player.playAlbum(285723602, true);\n            console.log(response);\n            localStorage.setItem('userObj', JSON.stringify(response));\n            console.log(JSON.parse(localStorage.userObj));\n            this.user = JSON.parse(localStorage.userObj);\n            this.isLoggedIn = true;\n            this.resultobj = {\n              status: this.isLoggedIn,\n              user: this.user\n            };\n            this.getLoggedStatus.emit(this.resultobj);\n            console.log(this.resultobj);\n          });\n          return true;\n        } else {\n          console.log('User cancelled login or did not fully authorize.');\n          alert('Please log in.');\n          return false;\n        }\n      }\n      /*, {perms: 'basic_access,email'})*/\n      );\n    }\n\n    checkLogin() {\n      DZ.getLoginStatus(response => {\n        console.log(\"Hey there , just checking if you are logged in ...\");\n\n        if (response.authResponse.accessToken) {\n          this.lgData = localStorage.getItem('LoggedData');\n          this.lgData = JSON.parse(this.lgData);\n\n          if (this.lgData.status == true) {\n            this.isLoggedIn = true;\n            console.log(\"App innit : \" + this.isLoggedIn);\n            alert(\"Welcome back :::: \" + JSON.stringify(response));\n            localStorage.setItem('properties', JSON.stringify(response.authResponse));\n            this.user = localStorage.getItem('userObj');\n            this.user = JSON.parse(this.user);\n            this.resultobj = {\n              status: this.isLoggedIn,\n              user: this.user\n            }; //  localStorage.setItem('LoggedData',JSON.stringify(this.resultobj));\n\n            console.log(this.resultobj);\n            this.getLoggedStatus.emit(this.resultobj);\n          } else {\n            alert(\"Please log into app!\");\n            this.isLoggedIn = false;\n            this.resultobj = {\n              status: this.isLoggedIn\n            };\n            this.getLoggedStatus.emit(this.resultobj);\n            console.log(this.resultobj);\n          }\n\n          return false;\n        } else {\n          // no user session available, someone you dont know\n          alert(\"Please log in!\");\n          this.isLoggedIn = false;\n          this.resultobj = {\n            status: this.isLoggedIn\n          };\n          this.getLoggedStatus.emit(this.resultobj);\n          console.log(this.resultobj);\n          return false; //force login\n          //AuthService.login();\n        }\n      });\n    }\n\n    getUser() {\n      let user = localStorage.getItem(\"LoggedData\");\n      console.log(user);\n    }\n\n    logout() {\n      DZ.logout();\n      localStorage.removeItem(\"userObj\");\n      localStorage.removeItem(\"properties\");\n      this.isLoggedIn = false;\n      this.resultobj = {\n        status: this.isLoggedIn\n      };\n      localStorage.setItem(\"LoggedData\", JSON.stringify(this.resultobj));\n      this.getLoggedStatus.emit(this.resultobj);\n      console.log(\"logged out \" + JSON.stringify(localStorage) + \"\\n \" + JSON.stringify(this.resultobj)); // return this.isLoggedIn;\n\n      document.location.href = \"/\";\n    }\n\n  }\n\n  AuthService.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)();\n  };\n\n  AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n  return AuthService;\n})();","map":null,"metadata":{},"sourceType":"module"}